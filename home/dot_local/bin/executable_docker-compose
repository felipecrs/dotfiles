#!/bin/bash

get_in_path_except_current() {
  which -a "$1" | grep -A1 "$0" | grep -v "$0"
}

set -euo pipefail

if docker_compose="$(get_in_path_except_current docker-compose)"; then
  exec -- "$docker_compose" "$@"
fi

if docker compose version &>/dev/null; then
  exec -- docker compose "$@"
fi

echo "docker-compose or docker compose is not installed" >&2
exit 127
