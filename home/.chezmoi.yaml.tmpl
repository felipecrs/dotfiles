{{- /* The following variables are only available within this file */ -}}

{{- $personalName := "Felipe Santos" -}}
{{- $personalEmail := "felipecassiors@gmail.com" -}}

{{- $workName := "Felipe de CÃ¡ssio Rocha Santos" -}}
{{- $workEmail := "felipesantos@inatel.br" -}}

{{- $isWork := .is_work -}}
{{- if kindIs "invalid" $isWork -}}
{{-   if stdinIsATTY -}}
{{-     $isWork = promptBool "Is this a work environment" -}}
{{-     writeToStdout "\nðŸ’¡ Tip: you can make chezmoi ask this again with `chezmoi init --data=false`.\n" -}}
{{-   else -}}
{{- /*  You can set this environment variable to "true" in your work account for Codespaces or Gitpod */ -}}
{{-     $isWork = eq (env "DOTFILES_IS_WORK") "true" -}}
{{-   end -}}
{{- end -}}

{{- $isPersonal := not $isWork -}}

{{- $isWsl := or (env "WSL_DISTRO_NAME") (env "IS_WSL") | not | not -}}
{{- $isDevcontainer := or (env "REMOTE_CONTAINERS") (env "CODESPACES") (env "VSCODE_REMOTE_CONTAINERS_SESSION") | not | not -}}
{{- $isGnome := lookPath "gnome-shell" | not | not -}}

{{- /* This retains the value passed with --source on chezmoi init, which is used in the ./install script */ -}}
sourceDir: "{{ .chezmoi.sourceDir }}"

# Here we "export" the variables, so we can access them outside this file
data:
  is_personal: {{ $isPersonal }}
  is_work: {{ $isWork }}
  is_wsl: {{ $isWsl }}
  is_devcontainer: {{ $isDevcontainer }}
  is_gnome: {{ $isGnome }}

  personal_name: "{{ $personalName }}"
  personal_email: "{{ $personalEmail }}"

  work_name: "{{ $workName }}"
  work_email: "{{ $workEmail }}"

{{- if $isPersonal }}
  name: "{{ $personalName }}"
  email: "{{ $personalEmail }}"
{{- else }}
  name: "{{ $workName }}"
  email: "{{ $workEmail }}"
{{- end }}

{{- if or (lookPath "code") (lookPath "code-insiders") $isDevcontainer }}
  editor: "code --wait"
{{- else if lookPath "nano" }}
  editor: "nano"
{{- else if lookPath "vim" }}
  editor: "vim"
{{- else }}
  editor: "vi"
{{- end }}
